[문서 제목] RAG, LangGraph, ROS2 구성 요소 역할 정리

[1. 전체 구성 개요]
- 서버 측:
  - LLM (PLAN LLM + 대화 LLM 역할)
  - RAG (벡터 스토어 + 임베딩 모델)
  - LangGraph (에이전트 오케스트레이션 및 PLAN 실행 흐름 관리)

- 로봇 측:
  - ROS 2 기반 주행 및 센서 노드
  - STT, TTS 모듈
  - VLM 또는 기타 인지 모듈

[2. RAG의 역할]
- 사용자 미션, 위치 정의, 액션 스키마, 안전 규칙, 대화 스타일과 같은 문서를 저장한다.
- LLM이 PLAN을 세우거나 대화를 할 때, 관련 문서를 검색하여 문맥으로 제공한다.
- 예:
  - "교수님 방에 가서"라는 표현이 들어오면,
    - 01_environment_and_locations 문서에서 professor_office ID를 찾는다.
  - "복도가 시끄러운지 확인"이라는 표현이 들어오면,
    - 03_mission_examples_and_plans 문서와 05_safety_guidelines 문서를 함께 참고하여 PLAN을 구성할 수 있다.

[3. LangGraph의 역할]
- PLAN LLM, 대화 LLM, VLM 호출을 상태 머신처럼 연결한다.
- 예시 흐름:
  1) 사용자의 자연어 명령 수신
  2) RAG 검색 → PLAN LLM 호출 → PLAN JSON 생성
  3) PLAN의 각 액션을 순서대로 실행:
     - navigate → ROS 2 action 호출
     - observe_scene → VLM 또는 인지 노드 호출
     - talk_to_person → STT + LLM + TTS 파이프라인 호출
  4) 각 단계의 성공/실패에 따라 다음 단계 또는 fail_and_report로 분기

[4. ROS 2의 역할]
- 실제 이동, 센서 데이터 수집, 저수준 제어를 담당한다.
- LangGraph는 ROS 2의 서비스/액션/토픽을 호출하는 상위 계층의 오케스트레이터 역할을 한다.
- PLAN은 "무엇을 할지"를 정의하고, ROS 2는 "어떻게 움직일지"를 담당한다.

[5. 문서 설계 시 고려 사항]
- RAG 문서들은 가능한 한
  - 명확한 제목
  - 일관된 용어(예: professor_office, corridor_center)
  - 예시 PLAN JSON
  - 안전 규칙 및 예외 상황
  을 포함해야 한다.
- 이렇게 하면 PLAN LLM이 문서를 검색했을 때,
  구조화된 예시를 그대로 참고하여 안정적인 PLAN을 생성할 수 있다.
