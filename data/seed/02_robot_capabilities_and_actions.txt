[문서 제목] 로봇 능력 및 액션 스키마 정의

[1. 로봇이 수행할 수 있는 주요 능력]

1) 자율 주행 (navigation)
- 지정된 위치 ID로 주행할 수 있다.
- 복도 환경에서 사람, 장애물과의 충돌을 피해야 한다.

2) 물체 전달 (delivery)
- 사용자가 사전에 로봇 위에 올려둔 물건을 지정된 위치에서 전달 완료로 처리한다.
- 실제 물건을 집어 들고 건네주는 것이 아니라, "전달 완료" 상태를 시스템 상에 기록한다.

3) 장면 관찰 (observation)
- 카메라와 VLM 또는 전용 모델을 이용해 주변 상황을 분석한다.
- 예: 사람 수, 소음 간접 판단(사람 밀집도), 조명 상태(불이 켜져 있는지) 등.

4) 사람과의 대화 (conversation)
- STT, LLM, TTS를 활용해 사람과 짧은 대화를 수행한다.
- 교수님과의 질의응답, 상황 설명, 안내 멘트 등에 사용된다.

5) 요약 및 보고 (summarization)
- 미션 수행 중 기록된 대화 및 관찰 내용을 텍스트로 요약한다.
- 요약 결과를 서버에 로그로 남기거나 이후 분석에 활용한다.

[2. PLAN에서 사용하는 액션 정의]

아래 액션들은 PLAN LLM이 생성할 수 있는 기본 액션 종류이다.
각 액션은 "action" 필드와 "params" 객체를 가진다.

1) navigate
- 설명: 로봇을 특정 위치 ID로 이동시킨다.
- 필수 파라미터:
  - target (string): 목표 위치 ID
- 예시:
  {
    "action": "navigate",
    "params": { "target": "professor_office" }
  }

2) deliver_object
- 설명: 현재 위치에서 물건 전달 절차를 수행한다.
- 필수 파라미터: 없음
- 선택 파라미터:
  - receiver (string): "professor" 등 수신자 식별자
- 예시:
  {
    "action": "deliver_object",
    "params": { "receiver": "professor" }
  }

3) observe_scene
- 설명: 특정 위치에서 주변 상황을 관찰하고 요약한다.
- 필수 파라미터:
  - target (string): 관찰을 수행할 위치 ID
  - query (string): 무엇을 관찰할지에 대한 설명
- 예시:
  {
    "action": "observe_scene",
    "params": {
      "target": "corridor_center",
      "query": "복도가 시끄러운지, 사람이 많은지 확인해줘"
    }
  }

4) talk_to_person
- 설명: 특정 인물 또는 사용자와 대화를 수행한다.
- 필수 파라미터:
  - target (string): "professor", "student", "user" 등
  - topic (string): 대화 주제 또는 질문/보고 내용 요약
- target 값 규칙:
  - "professor": 교수님과 대화를 할 때 사용
  - "user": 미션을 요청한 사용자(또는 해당 사용자의 UI)에게 결과를 설명할 때 사용
- "내게 다시 알려줘", "나한테 와서 알려줘", "결과를 말해줘"와 같은 표현이 있는 경우,
  PLAN의 마지막 부분에서 다음 패턴을 사용한다.
  1) navigate 액션으로 사용자 위치(예: "basecamp")로 이동
  2) talk_to_person 액션으로 target="user"에게 결과를 보고
- 예시:
  {
    "action": "navigate",
    "params": { "target": "basecamp" }
  },
  {
    "action": "talk_to_person",
    "params": {
      "target": "user",
      "topic": "교수님의 다음 회의 일정 결과 보고"
    }
  }

5) summarize_mission
- 설명: 미션 전체 진행 내용을 요약한다.
- 필수 파라미터: 없음
- 예시:
  {
    "action": "summarize_mission",
    "params": {}
  }

- 설명: 미션을 정상적으로 완료할 수 없을 때, 실패 사유를 요약하여 보고한다.
- 필수 파라미터:
  - reason (string): 실패 원인에 대한 간단한 설명
- 사용 조건:
  - "왜 안 됐는지 알려줘", "왜 실패했는지 설명해줘" 등 실패 이유를 설명하라는 요청이 있을 때만 사용한다.
  - 단순히 "내게 다시 알려줘", "결과를 알려줘"와 같이 정상 결과를 사용자에게 전달하라는 요구에는 사용하지 않는다.
- 예시:
  {
    "action": "fail_and_report",
    "params": {
      "reason": "교수님이 방에 안 계심"
    }
  }

[3. PLAN LLM을 위한 요약 규칙]
- PLAN은 항상 위에 정의된 액션 이름만 사용해야 한다.
- 액션 순서는 사용자의 요청과 안전 요구사항을 동시에 만족해야 한다.
- 액션의 결과 성공/실패 여부는 LangGraph + ROS 2 계층에서 판단하고,
  실패 시에는 fail_and_report와 같은 액션이 다시 생성될 수 있다.
